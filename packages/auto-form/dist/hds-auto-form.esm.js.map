{"version":3,"file":"hds-auto-form.esm.js","sources":["../src/components/AutoForm.tsx"],"sourcesContent":["import { Box, Button, VStack } from '@chakra-ui/react';\nimport { InputField, TextAreaField } from '@highoutput/hds-forms';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport React, { FC } from 'react';\nimport { useForm, UseFormReturn } from 'react-hook-form';\n\nexport type AutoFormProps = {\n  yupSchema?: any;\n  onSubmitForm?(v: any): void;\n  placeholders?: Array<string>;\n};\n\nexport enum InputTypeEnum {\n  Textarea = 'textarea',\n  Input = 'input',\n}\n\nexport interface InputTypeProps {\n  key: string;\n  label: string;\n  placeholder: string;\n}\n\nconst getInputType = (\n  input: InputTypeProps,\n  type: InputTypeEnum,\n  form: UseFormReturn\n) => {\n  const { key, placeholder, label } = input;\n  const { register, formState } = form;\n  const { isSubmitting, errors } = formState;\n  const error = errors[`${key}`]?.message as unknown as string;\n\n  const input_type = {\n    textarea: (\n      <TextAreaField\n        {...register(key)}\n        key={key}\n        id={key}\n        label={label}\n        placeholder={placeholder}\n        errorMsg={error}\n        disabled={isSubmitting}\n        width=\"100%\"\n      />\n    ),\n    input: (\n      <InputField\n        {...register(key)}\n        key={key}\n        id={key}\n        label={label}\n        placeholder={placeholder}\n        errorMsg={error}\n        disabled={isSubmitting}\n      />\n    ),\n  };\n\n  return input_type[type];\n};\n\nconst AutoForm: FC<AutoFormProps> = (props) => {\n  const { yupSchema, onSubmitForm, placeholders } = props;\n\n  const dataKey = Object.keys(yupSchema.fields);\n\n  const form = useForm({\n    resolver: yupResolver(yupSchema),\n\n    shouldUnregister: true,\n  });\n\n  const { handleSubmit } = form;\n\n  const onSubmitData = (s: any) => {\n    if (onSubmitForm) onSubmitForm(s);\n  };\n\n  return (\n    <Box width={512}>\n      <VStack as={'form'} onSubmitCapture={handleSubmit(onSubmitData)}>\n        {dataKey.map((key, idx) => {\n          const input = {\n            key,\n            label:\n              yupSchema.fields[`${key}`].spec.label ??\n              key.charAt(0).toUpperCase() + key.slice(1),\n            placeholder: placeholders?.[idx],\n          } as InputTypeProps;\n          const type = yupSchema.fields[`${key}`].spec?.meta?.type || 'input';\n\n          return getInputType(input, type, form);\n        })}\n        <Button\n          type=\"submit\"\n          variant={'primary'}\n          width={'100%'}\n          data-testid=\"button.form.submit\"\n        >\n          Submit\n        </Button>\n      </VStack>\n    </Box>\n  );\n};\n\nexport default AutoForm;\n"],"names":["InputTypeEnum","getInputType","input","type","form","key","placeholder","label","register","formState","isSubmitting","errors","error","message","input_type","textarea","React","TextAreaField","id","errorMsg","disabled","width","InputField","AutoForm","props","yupSchema","onSubmitForm","placeholders","dataKey","Object","keys","fields","useForm","resolver","yupResolver","shouldUnregister","handleSubmit","onSubmitData","s","Box","VStack","as","onSubmitCapture","map","idx","spec","charAt","toUpperCase","slice","meta","Button","variant"],"mappings":"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"}